Learn Rails screencasts, episode 45
"Testing controllers with rspec: macroses"

